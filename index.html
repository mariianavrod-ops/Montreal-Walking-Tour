<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Montreal Walking Tour</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    .layout {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 40%;
      min-width: 320px;
      max-width: 460px;
      padding: 16px;
      background: #050816;
      border-right: 1px solid #1f2937;
      overflow-y: auto;
    }
    .map {
      flex: 1;
    }
    #map {
      width: 100%;
      height: 100%;
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.6rem;
    }
    h2 {
      margin: 0 0 12px;
      font-size: 0.95rem;
      font-weight: 400;
      color: #9ca3af;
    }

    .location-card {
      background: radial-gradient(circle at top left, #1d2538, #020617);
      border-radius: 20px;
      padding: 12px 14px 16px;
      margin-bottom: 14px;
      border: 1px solid #1f2937;
      cursor: pointer;
      transition: background 0.15s, transform 0.15s, box-shadow 0.15s;
      box-shadow: 0 8px 18px rgba(0,0,0,0.4);
    }
    .location-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.55);
      border-color: #4b5563;
    }

    .location-header {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 700;
      background: #f97316;
      color: white;
      margin-right: 8px;
      flex-shrink: 0;
    }
    .location-title {
      font-weight: 600;
      font-size: 1rem;
    }
    .location-meta {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 6px;
    }
    .location-image {
      width: 100%;
      border-radius: 16px;
      margin-bottom: 8px;
      max-height: 220px;
      object-fit: cover;
      border: 1px solid #374151;
    }
    .location-desc {
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 8px;
      color: #e5e7eb;
    }

    .tag-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 600;
      margin-bottom: 2px;
      display: block;
    }

    .theme-box {
      background: linear-gradient(135deg, #7c2d12, #b45309);
      border-radius: 14px;
      padding: 8px 10px;
      margin-bottom: 6px;
      font-size: 0.85rem;
      color: #fef9c3;
    }

    .hint {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <div class="layout">
    <aside class="sidebar">
      <h1>Montreal Walking Tour</h1>
      <h2>Place des Montréalaises, shelters & contested downtown spaces</h2>
      <p class="hint">
        Click a card or a marker to centre the map. The boxes highlight a key theme for each site.
      </p>
      <div id="location-list"></div>
    </aside>

    <div class="map">
      <div id="map"></div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin=""
  ></script>

  <script>
    /* ---- 1. Locations with description + theme  ---- */
    const locations = [
      {
        id: 1,
        name: "Place des Montréalaises",
        coords: [45.51349251464839, -73.54877633843134],
        address: "1 Pl. Ville-Marie, Montréal, QC H3B 2B6",
        image: "place-des-montrealaises.jpg",
        description:
          " Place des Montréalaises, opened on May 16, 2025, is a new public space at Champ-de-Mars that links Old Montreal to the city centre and acts as a feminist place of commemoration.   By incorporating symbolic elements like a mirrored installation engraved with the names of seven women: Jeanne Mance, Marie-Josèphe Angélique, Myra Cree, Agnès Vautier, Jessie Maxwell Smith, Ida Roth Steinberg, and Idola St-Jean—as well as the 14 victims of the École Polytechnique feminicide, the space honours the women who shaped Montreal. Adjacent Place Marie-Josèphe-Angélique was similarly rebuilt to reflect the history of slavery and gendered violence in Canada. Together, these places underscore women’s histories that have long been overlooked in Montreal’s urban setting.",
        theme:
          "The square shows how naming practices can repair erasures: women’s lives, which used to be absent from official stone and street signs, are brought into the centre of the city’s visual story.",
      },
      {
        id: 2,
        name: "Grey Nuns Motherhouse",
        coords: [45.49533879399124, -73.57015843487274],
        address: "1190 Rue Guy",
        image: "grey-nuns.jpg",
        description:
          "The Grey Nuns were a Catholic women’s religious order whose members devoted their lives to care work that established Montreal’s early social welfare system. They maintained hospitals, orphanages, seniors’ homes, and shelters for the needy, giving medical treatment, education, food, and lodging long before the state supplied these services. Inside the Motherhouse, they cooked, cleaned, nursed the sick, taught children, cared for unwed mothers, and assisted those facing poverty, disease, and handicap. Their work formed the backbone of Montreal’s institutional care, although it was accomplished almost completely within the restricted area of the convent. Although they performed a key public role in aiding the city’s most disadvantaged people, their efforts were portrayed as domestic or religious responsibility rather than civic leadership, resulting to their work being historically neglected in Montreal’s public consciousness."
        theme:
          "The Motherhouse reveals how women’s unpaid religious labour built much of Montreal’s social safety net, even while remaining under male ecclesial and state authority."
      },
      {
        id: 3,
        name: "Chez Doris",
        coords: [45.494730476445284, -73.59458908240381],
        address: "1430 Rue Chomedey",
        image: "chez-doris.jpg",
        description:
          "In the 1970s, Doris, a homeless woman, informed a community worker that women like her needed "a place to go, without prying eyes or too many questions," which led to the creation of Chez Doris. Doris was killed on November 2, 1974, shortly after the interview, and Chez Doris was established in her honour in 1977. What started out as a one-day facility has expanded into a network of service locations that provide women dealing with homelessness, assault, and poverty with safety, dignity, and useful assistance. For over fifty years, Chez Doris has functioned as a sanctuary built in compassion and in the respect of women’s right to security and autonomy."
        theme:
          "Placed only a few blocks from former religious institutions, Chez Doris shows how the work of care has shifted from convents to community organizations, while structural inequalities that produce gendered precarity remain.",
      },
      {
        id: 4,
        name: "Square Dorchester",
        coords: [45.503628717394356, -73.55788369114875],
        address: "Downtown Montreal",
        image: "square-dorchester.jpg",
        description:
          "The Lord Strathcona Monument, located at the heart of Dorchester Square, was funded by public subscription and comprises a bronze horse sculpture on a granite pedestal built by architects Edward and William S. Maxwell. In addition to a picture of Lord Strathcona, the monument has three bronze bas-reliefs that represent significant moments in the Boer War, including the Battle of Paardeberg and the Komati River fight. The sculpture represents a dismounted scout controlling his rising horse, depicted at one-and-a-half times real size. It honours Lord Strathcona's contribution to recruiting a cavalry regiment for Britain during Canada's first foreign military operation as well as the Canadian troops who served in the Boer War. It is Montréal's lone equestrian monument."
        theme:
          "Square Dorchester highlights the imbalance between monumental male figures in stone and the almost invisible histories of women, service workers, and unhoused people who also occupy this space.",
      },
      {
        id: 5,
        name: "Parc des Faubourgs",
        coords: [45.52801980243481, -73.55319782666079],
        address: "Near Papineau station, Centre-Sud",
        image: "parc-des-faubourgs.jpg",
        description:
          "Parc des Faubourgs is surrounded by Ontario, Dorion, and De Lorimier and is situated close to the Jacques-Cartier Bridge. Its name evokes the historic working-class faubourgs, such as Sainte-Marie, Faubourg-à-m’lasse, and Faubourg Québec, that established the social identity of this area. During the housing crisis, the park became the location of the “Refus Local” encampment, where supporters opposed the destruction of homeless camps in Montreal. They suggested that clearing encampments exposes already vulnerable people, particularly women, to much greater danger. Today, the park represents both the district’s historical origins and continuing issues surrounding poverty, instability, and relocation."
        theme:
          "As a historic working-class district now marked by encampments and protests against shelter removals, the park exposes how policies around homelessness place vulnerable women at greater risk while their stories go unrecognized in the city’s official landscape." 
      }
    ];

    /* ---- 2. Init map ---- */
    const map = L.map("map").setView([45.505, -73.565], 13);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19
    }).addTo(map);

    const markerById = {};
    const boundsPoints = [];

    locations.forEach((loc) => {
      const marker = L.marker(loc.coords)
        .addTo(map)
        .bindPopup(`<b>${loc.name}</b><br>${loc.address}`);

      markerById[loc.id] = marker;
      boundsPoints.push(loc.coords);
    });

    if (boundsPoints.length) {
      map.fitBounds(boundsPoints, { padding: [40, 40] });
    }

    /* ---- 3. Render cards with description + theme  ---- */
    const listEl = document.getElementById("location-list");

    locations.forEach((loc) => {
      const card = document.createElement("article");
      card.className = "location-card";

      card.innerHTML = `
        <div class="location-header">
          <span class="badge">${loc.id}</span>
          <div class="location-title">${loc.name}</div>
        </div>
        <div class="location-meta">${loc.address}</div>
        <img class="location-image" src="${loc.image}" alt="${loc.name}">
        <p class="location-desc">${loc.description}</p>
        <div class="theme-box">
          <span class="tag-label">Key Theme</span>
          ${loc.theme}
        </div>
      `;

      card.addEventListener("click", () => {
        const marker = markerById[loc.id];
        map.setView(loc.coords, 16);
        marker.openPopup();
      });

        listEl.appendChild(card);
    });

    // ---- 4. Remove any stray “[object Object]” text nodes, just in case ----
    document.querySelectorAll(".location-card *").forEach((el) => {
      if (el.textContent.trim() === "[object Object]") {
        el.remove();
      }
    });
  </script>
</body>
</html>
