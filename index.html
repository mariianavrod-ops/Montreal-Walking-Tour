<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Montreal Walking Tour</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    .layout {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 35%;
      min-width: 280px;
      max-width: 420px;
      padding: 16px;
      background: #111827;
      border-right: 1px solid #1f2937;
      overflow-y: auto;
    }
    .map {
      flex: 1;
    }
    #map {
      width: 100%;
      height: 100%;
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.6rem;
    }
    h2 {
      margin: 0 0 12px;
      font-size: 0.95rem;
      font-weight: 400;
      color: #9ca3af;
    }

    .location-card {
      background: #1f2937;
      border-radius: 16px;
      padding: 10px 12px 12px;
      margin-bottom: 12px;
      border: 1px solid #374151;
      cursor: pointer;
      transition: background 0.15s, transform 0.15s;
    }
    .location-card:hover {
      background: #0f172a;
      transform: translateY(-1px);
    }

    .location-header {
      display: flex;
      align-items: center;
      margin-bottom: 4px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 700;
      background: #f97316;
      color: white;
      margin-right: 8px;
    }
    .location-title {
      font-weight: 600;
      font-size: 0.98rem;
    }
    .location-meta {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 6px;
    }
    .location-image {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 6px;
      max-height: 190px;
      object-fit: cover;
      border: 1px solid #374151;
    }
    .location-desc {
      font-size: 0.86rem;
      line-height: 1.4;
    }
  </style>
</head>

<body>
  <div class="layout">
    <aside class="sidebar">
      <h1>Montreal Walking Tour</h1>
      <h2>Women's histories, shelters & urban memory</h2>
      <div id="location-list"></div>
    </aside>

    <div class="map">
      <div id="map"></div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin=""
  ></script>

  <script>
    const locations = [
  {
    id: 1,
    name: "Place des Montréalaises",
    coords: [45.51291233912891, -73.53194153492338],
    address: "Near Champ-de-Mars metro",
    image: "place-des-montrealaises.jpg",
    description:
      "A public square honouring women who shaped Montreal’s history. It reconnects Old Montreal with the downtown core."
  },
  {
    id: 2,
    name: "Grey Nuns Motherhouse",
    coords: [45.49533879399124, -73.57015843487274],
    address: "1190 Rue Guy",
    image: "grey-nuns.jpg",
    description:
      "Former convent and heritage site, symbolizing the role of religious women in social care, education, and health."
  },
  {
    id: 3,
    name: "Chez Doris",
    coords: [45.494730476445284, -73.59458908240381],
    address: "1430 Rue Chomedey",
    image: "chez-doris.jpg",
    description:
      "A women’s day shelter providing meals, support, and safety for women in situations of homelessness or vulnerability."
  },
  {
    id: 4,
    name: "Square Dorchester",
    coords: [45.503628717394356, -73.55788369114875],
    address: "Downtown Montreal",
    image: "square-dorchester.jpg",
    description:
      "A historic downtown park surrounded by major buildings and monuments. A key site for understanding public memory."
  },
  {
    id: 5,
    name: "Parc des Faubourgs",
    coords: [45.52801980243481, -73.55319782666079],
    address: "Near Papineau Station",
    image: "parc-des-faubourgs.jpg",
    description:
      "A park associated with protest movements, encampments, and social struggles in the Centre-Sud neighbourhood."
  }
];

    const map = L.map("map").setView([45.505, -73.565], 13);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19
    }).addTo(map);

    const markerById = {};
    const boundsPoints = [];

    locations.forEach((loc) => {
      const marker = L.marker(loc.coords)
        .addTo(map)
        .bindPopup(`<b>${loc.name}</b><br>${loc.address}`);

      markerById[loc.id] = marker;
      boundsPoints.push(loc.coords);
    });

    if (boundsPoints.length) {
      map.fitBounds(boundsPoints, { padding: [40, 40] });
    }

    const listEl = document.getElementById("location-list");

    locations.forEach((loc) => {
      const card = document.createElement("article");
      card.className = "location-card";

      card.innerHTML = `
        <div class="location-header">
          <span class="badge">${loc.id}</span>
          <div class="location-title">${loc.name}</div>
        </div>
        <div class="location-meta">${loc.address}</div>
        <img class="location-image" src="${loc.image}" alt="${loc.name}">
        <p class="location-desc">${loc.description}</p>
      `;

      card.addEventListener("click", () => {
        const marker = markerById[loc.id];
        map.setView(loc.coords, 16);
        marker.openPopup();
      });

      listEl.appendChild(card);
    });
  </script>
</body>
</html>
