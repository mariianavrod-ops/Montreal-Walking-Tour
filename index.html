<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Montreal Walking Tour</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    .layout {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 40%;
      min-width: 320px;
      max-width: 460px;
      padding: 16px;
      background: #050816;
      border-right: 1px solid #1f2937;
      overflow-y: auto;
    }
    .map {
      flex: 1;
    }
    #map {
      width: 100%;
      height: 100%;
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.6rem;
    }
    h2 {
      margin: 0 0 12px;
      font-size: 0.95rem;
      font-weight: 400;
      color: #9ca3af;
    }

    .location-card {
      background: radial-gradient(circle at top left, #1d2538, #020617);
      border-radius: 20px;
      padding: 12px 14px 16px;
      margin-bottom: 14px;
      border: 1px solid #1f2937;
      cursor: pointer;
      transition: background 0.15s, transform 0.15s, box-shadow 0.15s;
      box-shadow: 0 8px 18px rgba(0,0,0,0.4);
    }
    .location-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.55);
      border-color: #4b5563;
    }

    .location-header {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 700;
      background: #f97316;
      color: white;
      margin-right: 8px;
      flex-shrink: 0;
    }
    .location-title {
      font-weight: 600;
      font-size: 1rem;
    }
    .location-meta {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 6px;
    }
    .location-image {
      width: 100%;
      border-radius: 16px;
      margin-bottom: 8px;
      max-height: 220px;
      object-fit: cover;
      border: 1px solid #374151;
    }
    .location-desc {
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 8px;
      color: #e5e7eb;
    }

    .tag-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 600;
      margin-bottom: 2px;
      display: block;
    }

    .theme-box {
      background: linear-gradient(135deg, #7c2d12, #b45309);
      border-radius: 14px;
      padding: 8px 10px;
      margin-bottom: 6px;
      font-size: 0.85rem;
      color: #fef9c3;
    }

    .hint {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <div class="layout">
    <aside class="sidebar">
      <h1>Montreal Walking Tour</h1>
      <h2>Place des Montréalaises, shelters & contested downtown spaces</h2>
      <p class="hint">
        Click a card or a marker to centre the map. The boxes highlight a key theme for each site.
      </p>
      <div id="location-list"></div>
    </aside>

    <div class="map">
      <div id="map"></div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin=""
  ></script>

  <script>
    /* ---- 1. Locations with description + theme  ---- */
    const locations = [
      {
        id: 1,
        name: "Place des Montréalaises",
        coords: [45.51349251464839, -73.54877633843134],
        address: "1 Pl. Ville-Marie, Montréal, QC H3B 2B6",
        image: "place-des-montrealaises.jpg",
        description:
          "A new public square built above the Ville-Marie expressway that reconnects Old Montreal to the downtown core. It honours twenty-one women who shaped the city, making visible the gendered gaps in Montreal’s monuments and toponymy.",
        theme:
          "The square shows how naming practices can repair erasures: women’s lives, which used to be absent from official stone and street signs, are brought into the centre of the city’s visual story.",
      },
      {
        id: 2,
        name: "Grey Nuns Motherhouse",
        coords: [45.49533879399124, -73.57015843487274],
        address: "1190 Rue Guy",
        image: "grey-nuns.jpg",
        description:
          "Once the central convent of the Grey Nuns, this massive complex functioned as a site of charity and control: women religious managed hospitals, orphanages, and schools here. Today it is a Concordia residence and a protected heritage building.",
        theme:
          "The Motherhouse reveals how women’s unpaid religious labour built much of Montreal’s social safety net, even while remaining under male ecclesial and state authority."
      },
      {
        id: 3,
        name: "Chez Doris",
        coords: [45.494730476445284, -73.59458908240381],
        address: "1430 Rue Chomedey",
        image: "chez-doris.jpg",
        description:
          "Chez Doris is a day shelter and resource centre that offers meals, rest, social work, and practical support to women in precarious situations, including homelessness, violence, and poverty.",
        theme:
          "Placed only a few blocks from former religious institutions, Chez Doris shows how the work of care has shifted from convents to community organizations, while structural inequalities that produce gendered precarity remain.",
      },
      {
        id: 4,
        name: "Square Dorchester",
        coords: [45.503628717394356, -73.55788369114875],
        address: "Downtown Montreal",
        image: "square-dorchester.jpg",
        description:
          "Square Dorchester is one of downtown Montréal’s most symbolically rich public areas, replete with monuments that present an official tale about the city and the nation. Yet every significant remembered character in this square—Boer War troops, Lord Strathcona, and Sir Wilfrid Laurier—is a male. This is in line with feminist studies on Montréal's toponymy, which shows that only around 6% of the city's almost 6,000 locations are named after women. In other words, the memorial landscape predominantly represents masculine political, military, and economic dominance.",
        theme:
          "Square Dorchester highlights the imbalance between monumental male figures in stone and the almost invisible histories of women, service workers, and unhoused people who also occupy this space.",
      },
      {
        id: 5,
        name: "Parc des Faubourgs",
        coords: [45.52801980243481, -73.55319782666079],
        address: "Near Papineau station, Centre-Sud",
        image: "parc-des-faubourgs.jpg",
        description:
          "Located at the edge of the Jacques-Cartier Bridge, this park sits between busy roads and older working-class streets. It has hosted protests, encampments, and community events.",
        theme:
          "Parc des Faubourgs makes visible how housing precarity, addiction, and police surveillance shape public space. It shows the spatial consequences of policies that displace people from the city centre toward more marginal zones.",
      }
    ];

    /* ---- 2. Init map ---- */
    const map = L.map("map").setView([45.505, -73.565], 13);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19
    }).addTo(map);

    const markerById = {};
    const boundsPoints = [];

    locations.forEach((loc) => {
      const marker = L.marker(loc.coords)
        .addTo(map)
        .bindPopup(`<b>${loc.name}</b><br>${loc.address}`);

      markerById[loc.id] = marker;
      boundsPoints.push(loc.coords);
    });

    if (boundsPoints.length) {
      map.fitBounds(boundsPoints, { padding: [40, 40] });
    }

    /* ---- 3. Render cards with description + theme  ---- */
    const listEl = document.getElementById("location-list");

    locations.forEach((loc) => {
      const card = document.createElement("article");
      card.className = "location-card";

      card.innerHTML = `
        <div class="location-header">
          <span class="badge">${loc.id}</span>
          <div class="location-title">${loc.name}</div>
        </div>
        <div class="location-meta">${loc.address}</div>
        <img class="location-image" src="${loc.image}" alt="${loc.name}">
        <p class="location-desc">${loc.description}</p>
        <div class="theme-box">
          <span class="tag-label">Key Theme</span>
          ${loc.theme}
        </div>
      `;

      card.addEventListener("click", () => {
        const marker = markerById[loc.id];
        map.setView(loc.coords, 16);
        marker.openPopup();
      });

      listEl.appendChild(card);
    });
  </script>
</body>
</html>
